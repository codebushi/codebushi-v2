

<!DOCTYPE html>



<html amp lang="en-us" class="no-js">
<head>
    <title>Featured Blog Images In Gatsby.js</title>
    <meta charset="utf-8">

    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>

    <script async src="https://cdn.ampproject.org/v0.js"></script>

    
        

<link rel="amp-manifest" href="/amp-manifest.json">

    




    <link rel="canonical" href="https://codebushi.com/gatsby-featured-images/">
    <link rel="icon" type="image/x-icon" href="https://codebushi.com/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <meta name="description" content="Adding a cover or featured image to Gatsby.js blog posts.">

    

    <meta name="theme-color" content="#f72060" />

    
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Code Bushi",
    "alternateName": "Code Bushi",
    "url": "https://codebushi.com/"
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "codebushi.com",
  "url": "https://codebushi.com/"
  
  , "logo": "https://codebushi.com/codebushilogo.png"
  
  
}
</script>
















<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://codebushi.com/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "https://codebushi.com/gatsby-featured-images/",
          "name": "gatsby-featured-images"
        }
    }]
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Hunter Chang"
  },
  "headline": "Featured Blog Images In Gatsby.js",
  "description": "Adding a cover or featured image to Gatsby.js blog posts.",
  "wordCount": 1075,
  "datePublished" : "2017-11-24",
  "dateModified" : "2017-11-24",
  "image" : {
      "@context": "http://schema.org",
      "@type": "ImageObject",
      "url": "https://codebushi.com/amp/img/gatsby-featured-image.jpg",
      "height" : 503,
      "width" : 920
    },
  "mainEntityOfPage" : "https://codebushi.com/gatsby-featured-images/",
  "publisher" : {
    "@type": "Organization",
    "name" : "codebushi.com",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https://codebushi.com/codebushilogoamp.png",
        "height" : 60,
        "width" : 320
    }
  }
}
</script>




    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>
        html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{margin:.67em 0}mark{background:#ff0;color:#000}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}td,th{padding:0}*{box-sizing:border-box}button,input,select,textarea{font:13px/1.4 Helvetica,arial,freesans,clean,sans-serif}a{color:#4183c4}a:active,a:focus,a:hover{text-decoration:underline}.rule,hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border:0;border-bottom:1px solid #ddd}.rule:after,.rule:before,hr:after,hr:before{display:table;content:""}.rule:after,hr:after{clear:both}fieldset{padding:0;margin:0;border:0}label{font-size:13px;font-weight:700}#adv_code_search .search-page-label,input[type=email],input[type=number],input[type=password],input[type=tel],input[type=text],input[type=url],textarea{min-height:34px;padding:7px 8px;font-size:13px;color:#333;vertical-align:middle;background-color:#fff;background-repeat:no-repeat;background-position:100%;border:1px solid #ccc;border-radius:3px;outline:none;box-shadow:inset 0 1px 2px rgba(0,0,0,.075)}#adv_code_search .focus.search-page-label,#adv_code_search .search-page-label:focus,.focused .drag-and-drop,input[type=email].focus,input[type=email]:focus,input[type=number].focus,input[type=number]:focus,input[type=password].focus,input[type=password]:focus,input[type=tel].focus,input[type=tel]:focus,input[type=text].focus,input[type=text]:focus,input[type=url].focus,input[type=url]:focus,textarea.focus,textarea:focus{border-color:#51a7e8;box-shadow:inset 0 1px 2px rgba(0,0,0,.075),0 0 5px rgba(81,167,232,.5)}.input-contrast,input.input-contrast{background-color:#fafafa}.input-contrast:focus,input.input-contrast:focus{background-color:#fff}:-moz-placeholder,::-webkit-input-placeholder{color:#aaa}::-webkit-validation-bubble-message{font-size:12px;color:#fff;background:#9c2400;border:0;border-radius:3px;-webkit-box-shadow:1px 1px 1px rgba(0,0,0,.1)}input::-webkit-validation-bubble-icon{display:none}::-webkit-validation-bubble-arrow{background-color:#9c2400;border:1px solid #9c2400;-webkit-box-shadow:1px 1px 1px rgba(0,0,0,.1)}.absent{color:#c00}.anchor{position:absolute;top:0;bottom:0;left:0;display:block;padding-right:6px;padding-left:30px;margin-left:-30px}.anchor:focus{outline:none}h1,h2,h3,h4,h5,h6{position:relative;margin-top:1em;margin-bottom:16px;font-weight:700;line-height:1.4}h1 .octicon-link,h2 .octicon-link,h3 .octicon-link,h4 .octicon-link,h5 .octicon-link,h6 .octicon-link{display:none;color:#000;vertical-align:middle}h1:hover .anchor,h2:hover .anchor,h3:hover .anchor,h4:hover .anchor,h5:hover .anchor,h6:hover .anchor{height:1em;padding-left:8px;margin-left:-30px;line-height:1;text-decoration:none}h1:hover .anchor .octicon-link,h2:hover .anchor .octicon-link,h3:hover .anchor .octicon-link,h4:hover .anchor .octicon-link,h5:hover .anchor .octicon-link,h6:hover .anchor .octicon-link{display:inline-block}h1 code,h1 tt,h2 code,h2 tt,h3 code,h3 tt,h4 code,h4 tt,h5 code,h5 tt,h6 code,h6 tt{font-size:inherit}h1{font-size:2.25em;line-height:1.2}h1,h2{padding-bottom:.3em;border-bottom:1px solid #eee}h2{font-size:1.75em;line-height:1.225}h3{font-size:1.5em;line-height:1.43}h4{font-size:1.25em}h5,h6{font-size:1em}h6{color:#777}blockquote,dl,ol,p,pre,table,ul{margin-top:0;margin-bottom:16px}hr{height:4px;margin:16px 0;background-color:#e7e7e7;border:0 none}ol,ul{padding-left:2em}ol.no-list,ul.no-list{padding:0;list-style-type:none}ol ol,ol ul,ul ol,ul ul{margin-top:0;margin-bottom:0}li>p{margin-top:16px}dl,dl dt{padding:0}dl dt{margin-top:16px;font-size:1em;font-style:italic;font-weight:700}dl dd{padding:0 16px;margin-bottom:16px}blockquote{padding:0 15px;color:#777;border-left:4px solid #ddd}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}table th{font-weight:700}table td,table th{padding:6px 13px;border:1px solid #ddd}table tr{background-color:#fff;border-top:1px solid #ccc}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%;box-sizing:border-box}span.frame,span.frame>span{display:block;overflow:hidden}span.frame>span{float:left;width:auto;padding:7px;margin:13px 0 0;border:1px solid #ddd}span.frame span img{display:block;float:left}span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}span.align-center{display:block;overflow:hidden;clear:both}span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}span.align-center span img{margin:0 auto;text-align:center}span.align-right{display:block;overflow:hidden;clear:both}span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}span.align-right span img{margin:0;text-align:right}span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}span.float-left span{margin:13px 0 0}span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}code,tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:"\00a0"}code br,tt br{display:none}del code{text-decoration:inherit;vertical-align:text-top}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.highlight{margin-bottom:16px}.highlight pre,pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.highlight pre{margin-bottom:0;word-break:normal}pre,pre code,pre tt{word-wrap:normal}pre code,pre tt{display:inline;max-width:none;padding:0;margin:0;overflow:initial;line-height:inherit;background-color:transparent;border:0}pre code:after,pre code:before,pre tt:after,pre tt:before{content:normal}abbr,address,article,aside,audio,b,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,p,pre,q,samp,section,small,span,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,ul,var,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{text-decoration:none}ins,mark{background-color:#ff9;color:#000}mark{font-style:italic;font-weight:700}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-collapse:collapse;border-spacing:0}hr{display:block;height:1px;border-top:1px solid #ccc;margin:1em 0}input,select{vertical-align:middle}body{background-color:#0f1621;color:#fff;font-size:14px;font-family:Helvetica Neue,Helvetica,Segoe UI,Arial,freesans,sans-serif}main{max-width:1180px;padding:30px;margin:0 auto}h1{font-weight:300;line-height:1.4em;margin:.5em 0;font-family:Georgia,serif;transition:color .4s}h1,h2{font-size:2em}h2,h3{font-weight:300;margin:30px 0}h3{font-size:1.8em}h4{font-size:1.6em}h4,h5{font-weight:300}h5{font-size:1.2em}h6{font-weight:300;font-size:1em}p{line-height:1.4em;font-size:1.2em;margin:15px 0}blockquote{border-left:5px solid #ff1d55;background-color:#ffe9ee;padding:1em;margin-bottom:1em}small{font-size:80%}.lightbox{background-color:rgba(3,121,196,.4);min-height:100vh;min-width:100vw;padding:30px}code{font:14px Consolas,Liberation Mono,Menlo,Courier,monospace}p>code{color:#ff1d55}pre code{display:block;background-color:#f7f7f7;padding:15px;overflow:auto;color:#123;line-height:1.4em}a{color:#f72060;text-decoration:none;transition:color .4s,background .4s}a:hover{color:#e9003a}ol,ul{margin:7.5px;padding:7.5px 15px}ol li,ul li{margin:7.5px 15px}.doc-parameters{list-style-type:none;padding:0}.doc-parameters li{display:block;margin:0;margin-bottom:15px}.doc-parameters .example,.doc-parameters blockquote{border-left:5px solid #0379c4;background-color:#96d5fd;color:#123;line-height:1em;font-size:1em;padding:1em;margin:0}.doc-parameters .example{background-color:#c8e9fe}.doc-parameters .parameter{display:block;padding:1em;background-color:#0379c4;color:#fff;margin:0}.doc-parameters .parameter strong{display:inline-block;padding:0 .5em;border-radius:.25em;line-height:2em;background-color:#025a92}hr{height:.25em;padding:0;margin:24px 0;background-color:#f7f7f7;border:0}.teaser{display:-ms-flexbox;display:flex;text-align:left;-ms-flex-line-pack:center;align-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between}.teaser aside{-ms-flex-preferred-size:60%;flex-basis:60%;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;padding:30px}@media (max-width:700px){.teaser aside{-ms-flex-preferred-size:100%;flex-basis:100%}}.teaser .content{-ms-flex-preferred-size:40%;flex-basis:40%;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;color:dimgray;font-size:12px}@media (max-width:700px){.teaser .content{-ms-flex-preferred-size:100%;flex-basis:100%}}.teaser .content.content-full{-ms-flex-preferred-size:100%;flex-basis:100%}.teaser .content h3{font-size:14px;text-transform:uppercase;font-weight:600;color:#123}.main-index{text-align:center}.main-index amp-img{margin:15px auto;width:50%}@media (min-width:900px){h1{font-size:3em}.main-index p{font-size:2em}}.breadcrumbs{padding:1em;background-color:#f7f7f7}.breadcrumbs ul{display:block;margin:0;padding:0}.breadcrumbs ul li{display:inline-block;margin:0 .5em}.breadcrumbs ul li:before{content:" / ";position:relative;margin-left:-.5em;color:dimgray}.breadcrumbs ul li a{color:dimgray}.breadcrumbs ul li:last-child a{color:#ff1d55}header{background-color:#ff1d55;color:#fff;padding:30px;position:relative}header .brand{display:inline-block;position:absolute;left:30px;top:20px;line-height:15px;text-transform:uppercase;padding:7.5px;font-size:1.4em}header .brand:hover{background-color:#ff1d55;color:#fff}header a{color:#fff;text-decoration:none;border-radius:7.5px;padding:7.5px}header a:hover{text-decoration:none;background-color:#fff;color:#ff1d55}header nav ul{padding:0;margin:0;display:block;text-align:right}header nav ul li{padding:0;margin:0 7.5px;display:inline-block}header nav ul li.hamburger{display:none}header nav ul li.hamburger button{position:absolute;right:30px;top:20px;border:0;background-color:#fff;color:#ff1d55;font-weight:700;border-radius:50%;width:30px;height:30px;overflow:hidden;text-align:center;padding:0;margin:0}@media (max-width:900px){header nav ul li{display:none}header nav ul li.hamburger{display:inline-block}}.sidebarNavigation{width:210px;max-width:95%}.sidebarNavigation ul{padding:0;margin:0}.sidebarNavigation ul li{display:block}.sidebarNavigation ul li a{display:block;line-height:1.4em;padding:7.5px}footer{margin:60px auto;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between;max-width:1180px;padding:30px;font-size:12px}footer a:hover{text-decoration:none}footer strong{text-transform:uppercase;margin-bottom:15px;display:block}footer strong a{color:#1d1d1d}footer ul{display:block;padding:0;margin:0}footer ul li{display:block;line-height:1.4em;padding:7.5px 0;margin:0}footer ul li a{color:dimgray}footer .quarter-section{margin-bottom:30px;-ms-flex-preferred-size:25%;flex-basis:25%}@media (max-width:900px){footer .quarter-section{-ms-flex-preferred-size:33%;flex-basis:33%}}@media (max-width:700px){footer .quarter-section{-ms-flex-preferred-size:50%;flex-basis:50%}}@media (max-width:500px){footer .quarter-section{-ms-flex-preferred-size:100%;flex-basis:100%}}.boxes{display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:justify;justify-content:space-between;font-size:12px}.boxes .box{-ms-flex-preferred-size:30%;flex-basis:30%;background-color:#f7f7f7;padding:30px;margin:7.5px 0;text-align:left;font-size:12px}.boxes .box h3{font-size:12px;line-height:1em;padding:0;margin:0}.boxes .box a{padding:0;color:#ff1d55}.boxes .box p{color:dimgray;font-size:12px;margin:7.5px 0}@media (max-width:900px){.boxes .box{-ms-flex-preferred-size:45%;flex-basis:45%}}@media (max-width:500px){.boxes .box{-ms-flex-preferred-size:100%;flex-basis:100%}}.mt-5,.my-5{margin-top:3rem}.mt-4,.my-4{margin-top:1.5rem}.mb-5,.my-5{margin-bottom:3rem}.mb-4,.my-4{margin-bottom:1.5rem}
    </style>


</head>

<body>






<main>
    <h1>Featured Blog Images In Gatsby.js</h1>
    <div>
        <p><small>November 24, 2017</small></p>
    </div>
    <div>
        <p><amp-img src="https://codebushi.com/amp/img/gatsby-featured-image.jpg" alt="" layout="responsive" width="920" height="503"></amp-img></p>
    </div>
    <div>
        <p>With <a href="https://www.gatsbyjs.org/">Gatsby.js</a>, it&rsquo;s pretty easy to get a static site up and running with one of their starter templates. The <code>gatsby-starter-blog</code> (<a href="https://github.com/gatsbyjs/gatsby-starter-blog">https://github.com/gatsbyjs/gatsby-starter-blog</a>) demonstrates how a Gatsby static site can function with blog posts written in markdown files. There is a list of blog posts on the homepage, but it would be nice to see a featured image with each post. Let&rsquo;s dive into the <code>gatsby-starter-blog</code> and associate a featured or cover image to a markdown post.</p>

<h4 class="mt-4 mb-4"><a href="http://hc-gatsby-featured-image-demo.surge.sh/">Gatsby Featured Image Demo</a> <small>( <a href="https://github.com/ChangoMan/gatsby-featured-image-demo">view source</a> )</small></h4>

<p>Start by installing the <a href="https://github.com/gatsbyjs/gatsby-starter-blog">gatsby-starter-blog</a> official starter.</p>

<pre><code class="language-bash">gatsby new gatsby-blog https://github.com/gatsbyjs/gatsby-starter-blog
cd gatsby-blog
gatsby develop
</code></pre>

<p>Open up your browser and head to  <code>http://localhost:8000/</code> to see the starter Gatsby site. You can see three blog posts on the homepage, but no images are associated with them. Let&rsquo;s fix that!</p>

<h3 class="mt-5 mb-3">Exploring the file structure and plugins</h3>

<p>First, let&rsquo;s explore how this site is working right now. If we look at the file structure of this site, it looks like this:</p>

<p><a href="https://i.imgur.com/Mz1c2La.png">Gatsby Starter Blog File Structure</a></p>

<p>We can see that all the blog posts live in the <code>/src/pages</code> directory, in their own separate folder. There is an image in the <code>hello-world</code> post, but that is not a featured image that we can query on the homepage. The <code>index.js</code> that&rsquo;s in <code>/src/pages</code> is the React component for the homepage.</p>

<p>If we open up <code>gatsby-config.js</code>, we can see the plugins used for processing the <code>/src/pages</code> directory:</p>

<pre><code class="language-javascript">plugins: [
{
  resolve: `gatsby-source-filesystem`,
  options: {
    path: `${__dirname}/src/pages`,
    name: 'pages',
  },
},
{
  resolve: `gatsby-transformer-remark`,
  options: {
    plugins: [
      {
        resolve: `gatsby-remark-images`,
        options: {
          maxWidth: 590,
        },
      },
      {
        resolve: `gatsby-remark-responsive-iframe`,
        options: {
          wrapperStyle: `margin-bottom: 1.0725rem`,
        },
      },
      'gatsby-remark-prismjs',
      'gatsby-remark-copy-linked-files',
      'gatsby-remark-smartypants',
    ],
  },
},
`gatsby-transformer-sharp`,
`gatsby-plugin-sharp`,
</code></pre>

<p>The first plugin is <a href="https://www.gatsbyjs.org/packages/gatsby-source-filesystem/">gatsby-source-filesystem</a> and the path of <code>/src/pages</code> is added there as an option. This is telling Gatsby to look in that directory and make the files there available to query in GraphQL.</p>

<p>Since our markdown files are in there, the second plugin, <a href="https://www.gatsbyjs.org/packages/gatsby-transformer-remark/">gatsby-transformer-remark</a>, will parse the markdown files into usable data nodes for GraphQL.</p>

<p>The last two plugins, <a href="https://www.gatsbyjs.org/packages/gatsby-transformer-sharp/">gatsby-transformer-sharp</a> and <a href="https://www.gatsbyjs.org/packages/gatsby-plugin-sharp/">gatsby-plugin-sharp</a>, are what we&rsquo;ll need later to process and query our featured images.</p>

<h3 class="mt-5 mb-3">Adding a featured image to a blog post</h3>

<p>Open up the markdown file for the latest blog post, titled &ldquo;New Beginnings&rdquo; here <code>/src/pages/hi-folks/index.md</code>. At the top, you&rsquo;ll see some info for the post, known as &ldquo;frontmatter&rdquo;</p>

<pre><code class="language-markdown">---
title: New Beginnings
date: &quot;2015-05-28T22:40:32.169Z&quot;
---
</code></pre>

<p>Here we see the title of the post and the date published. We can add a path to our featured image here like so:</p>

<pre><code class="language-markdown">---
title: New Beginnings
date: &quot;2015-05-28T22:40:32.169Z&quot;
featuredImage: &quot;./featured-image.jpg&quot;
---
</code></pre>

<p>Head over to <a href="https://unsplash.com/">https://unsplash.com/</a> and download a free stock image, saving it as <code>featured-image.jpg</code> in our post directory <code>/src/pages/hi-folks</code>.</p>

<p>Since we&rsquo;re here, might as well add images to the other two posts. *<em>Update</em>* - You&rsquo;ll actually need a featuredImage for all of your posts right now, or else you&rsquo;ll get an error <code>Cannot read property 'childImageSharp' of null</code> when trying to render your page.</p>

<p>Go ahead and download two more images, save them in the other two blogs at <code>/src/pages/hello-world</code> and <code>/src/pages/my-second-post</code>. Make sure to save all the images with the name <code>featured-image.jpg</code> Open up their respective index.md files and add <code>featuredImage: &quot;./featured-image.jpg&quot;</code> to the frontmatter. <em>Double check your image names and make sure they match what&rsquo;s in your frontmatter!</em></p>

<p>You can always save the images under a different name, just make sure your frontmatter reflects this.</p>

<h3 class="mt-5 mb-3">Displaying the featured image in the homepage query</h3>

<p>In order to display our new featured image, we&rsquo;re going to install a Gatsby React component called <a href="https://www.gatsbyjs.org/packages/gatsby-image/">gatsby-image</a>. From the terminal, let&rsquo;s stop our gatsby develop process and then install the gatsby-image component:</p>

<pre><code class="language-bash">yarn add gatsby-image
</code></pre>

<p>Check out my <a href="https://hunterchang.com/using-gatsby-image/">previous post about gatsby-image</a> to learn more about it.</p>

<p>Open up the homepage component at <code>/src/pages/index.js</code>. If we go to the bottom of this React component, we&rsquo;ll see the GraphQL query:</p>

<pre><code class="language-jsx">export const pageQuery = graphql`
  query IndexQuery {
    site {
      siteMetadata {
        title
      }
    }
    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {
      edges {
        node {
          excerpt
          fields {
            slug
          }
          frontmatter {
            date(formatString: &quot;DD MMMM, YYYY&quot;)
            title
          }
        }
      }
    }
  }
`
</code></pre>

<p>Under the <code>allMarkdownRemark</code> field, you&rsquo;ll see the <code>frontmatter</code> data we looked at earlier. We will add the <code>featuredImage</code> field here just below the title, so your query now looks like this:</p>

<pre><code class="language-jsx">export const pageQuery = graphql`
  query IndexQuery {
    site {
      siteMetadata {
        title
      }
    }
    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {
      edges {
        node {
          excerpt
          fields {
            slug
          }
          frontmatter {
            date(formatString: &quot;DD MMMM, YYYY&quot;)
            title
            featuredImage {
                childImageSharp{
                    sizes(maxWidth: 630) {
                        ...GatsbyImageSharpSizes
                    }
                }
            }
          }
        }
      }
    }
  }
`
</code></pre>

<p>The <code>childImageSharp</code> part is using the two Gatsby sharp plugins we mentioned earlier to process the images. <code>...GatsbyImageSharpSizes</code> is from the <code>gatsby-image</code> component we installed earlier, you can learn more about the  different image types available from the official <a href="https://www.gatsbyjs.org/packages/gatsby-image/">gatsby-image page</a>. Since our featured image will be fluid, we are using the <code>sizes</code> option with a maxWidth of 630px to match our content&rsquo;s container.</p>

<p>Let&rsquo;s start up <code>gatsby-develop</code> again and add our image. Up at the top of <code>/src/pages/index.js</code>, we&rsquo;ll import the <code>gatsby-image</code> component right below the Bio component:</p>

<pre><code class="language-jsx">import Bio from '../components/Bio'
import Img from 'gatsby-image'
import { rhythm } from '../utils/typography'
</code></pre>

<p>In our <code>posts.map()</code> function, we&rsquo;ll add the <code>&lt;Img /&gt;</code> component right below the <code>&lt;h3&gt;</code> and pass it the props for sizes. Your <code>return()</code> statement should now look like this:</p>

<pre><code class="language-jsx">return (
  &lt;div&gt;
    &lt;Helmet title={siteTitle} /&gt;
    &lt;Bio /&gt;
    {posts.map(({ node }) =&gt; {
      const title = get(node, 'frontmatter.title') || node.fields.slug
      return (
        &lt;div key={node.fields.slug}&gt;
          &lt;h3
            style={{
              marginBottom: rhythm(1 / 4),
            }}
          &gt;
            &lt;Link style={{ boxShadow: 'none' }} to={node.fields.slug}&gt;
              {title}
            &lt;/Link&gt;
          &lt;/h3&gt;
          &lt;Img sizes={node.frontmatter.featuredImage.childImageSharp.sizes} /&gt;
          &lt;small&gt;{node.frontmatter.date}&lt;/small&gt;
          &lt;p dangerouslySetInnerHTML={{ __html: node.excerpt }} /&gt;
        &lt;/div&gt;
      )
    })}
  &lt;/div&gt;
)
</code></pre>

<p>You should now see the featured images show up in the query of posts! However, if we click into a blog post, the featured image doesn&rsquo;t show up. No worries, the component for a blog post is located at <code>/src/templates/blog-post.js</code>. If you open up that file, it will look pretty similar to the index.js component. You can do the same thing here, add the <code>featuredImage</code> field to the GraphQL query at the bottom, import the <code>gatsby-image</code> component, and add the <code>&lt;Img /&gt;</code> tag on the page. Now your blog has sweet featured images that are optimized and will lazy load in!</p>

<h4><a href="http://hc-gatsby-featured-image-demo.surge.sh/">Finished Product</a> <small>( <a href="https://github.com/ChangoMan/gatsby-featured-image-demo">view source</a> )</small></h4>

    </div>
</main>



<amp-analytics type="googleanalytics">
    <script type="application/json">
        {
            "vars": {
                "account": "UA-115990515-1"
            },
            "triggers": {"trackEvent":{"on":"click","request":"event","selector":"body","vars":{"eventAction":"click","eventCategory":"body-click"}},"trackPageview":{"on":"visible","request":"pageview"}}
        }
    </script>
</amp-analytics>

</body>
</html>
